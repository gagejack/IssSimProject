package mainPackage;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.IOException;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JLayeredPane;
import javax.swing.JOptionPane;
import javax.swing.JTextField;

public class UserCreationWindow {

	private JFrame createFrame;
	private JLayeredPane createLayeredPane;
	
	private int createWidth = 400;
	private int createHeight = 300;
	private int createButtonX = 75;
	private int createButtonY = 200 + 20;
	private int userTextFieldX = 50;
	private int userTextFieldY = 50+ 20;
	private int passTextFieldX = 50;
	private int passTextFieldY = 120+ 20;
	
	private JLabel userLabel;
	private JTextField userText;
	
	private JLabel passLabel;
	private JTextField passText;
	
	private JButton createUserButton = new JButton();
	
	// ------------------------------------- User Creation Window Window -------------------------------------

	
	public void openCreateWindow() throws IOException {
		createFrame = new JFrame();
		createFrame.setSize(createWidth,createHeight);
		createFrame.setLocationRelativeTo(null);
		createFrame.setLayout(null);
		
		createLayeredPane = new JLayeredPane();
		createLayeredPane.setBounds(0, 0, createWidth, createHeight);
		createFrame.add(createLayeredPane);
		createFrame.setResizable(false);
		createFrame.setVisible(true);
		
		  userText = new JTextField();
	      userText.setBounds(userTextFieldX,userTextFieldY,200,25);
	      createLayeredPane.add(userText,Integer.valueOf(2));
	        
		initializeCreateUserButton();
		
		setupButtonListeners();
		}
	
	public void setupButtonListeners() {
		ActionListener buttonListener = new ActionListener() {
			@Override
			public void actionPerformed(ActionEvent ae) {
				Object o = ae.getSource();
				
				if(o == createUserButton) {
					System.out.println("Create Button");
					String user = userText.getText();
	                String pass = new String(passText.getText());
	                UserInfo userInfo = new UserInfo();
	                if(userInfo.passwordValidate(pass)) {
	                	System.out.println("Creating user: " + user + " with password: " + pass);
	                    JOptionPane.showMessageDialog(createFrame, "User " + user + " created successfully!");
	    				userInfo.saveUser(user, pass);
	                } else {
	                    JOptionPane.showMessageDialog(createFrame, "Password must contain a digit, an uppercase, and be 9 characters long");
	                }
	                
				}
			}
		};
		
		createUserButton.addActionListener(buttonListener);
	}
	
	public void initializeCreateUserButton() {
		createUserButton = new JButton("Create User");
        createUserButton.setBounds(createButtonX, createButtonY, 150, 25);
        createLayeredPane.add(createUserButton,Integer.valueOf(2));
	}
}
